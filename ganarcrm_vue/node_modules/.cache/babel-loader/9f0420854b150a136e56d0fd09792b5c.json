{"remainingRequest":"D:\\Projects\\GanarCRM\\ganarcrm_vue\\node_modules\\babel-loader\\lib\\index.js!D:\\Projects\\GanarCRM\\ganarcrm_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Projects\\GanarCRM\\ganarcrm_vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\Projects\\GanarCRM\\ganarcrm_vue\\src\\views\\dashboard\\teams\\Plans.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Projects\\GanarCRM\\ganarcrm_vue\\src\\views\\dashboard\\teams\\Plans.vue","mtime":1643915474964},{"path":"D:\\Projects\\GanarCRM\\ganarcrm_vue\\babel.config.js","mtime":1642871124264},{"path":"D:\\Projects\\GanarCRM\\ganarcrm_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642871812078},{"path":"D:\\Projects\\GanarCRM\\ganarcrm_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1642871819362},{"path":"D:\\Projects\\GanarCRM\\ganarcrm_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642871812078},{"path":"D:\\Projects\\GanarCRM\\ganarcrm_vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1642871820906}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxQcm9qZWN0c1xcR2FuYXJDUk1cXGdhbmFyY3JtX3Z1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IHRvYXN0IH0gZnJvbSAnYnVsbWEtdG9hc3QnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlBsYW5zIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHViX2tleTogJycsCiAgICAgIHN0cmlwZTogbnVsbAogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFB1YktleSgpOwogICAgdGhpcy5zdHJpcGUgPSBTdHJpcGUodGhpcy5wdWJfa2V5KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN1YnNjcmliZTogZnVuY3Rpb24gc3Vic2NyaWJlKHBsYW4pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnc2V0SXNMb2FkaW5nJywgdHJ1ZSk7CgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgcGxhbjogcGxhbgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoIi9hcGkvdjEvdGVhbXMvdXBncmFkZV9wbGFuLyIsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQbGFuIFVwZ3JhZGVkIScpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgic2V0VGVhbSIsIHsKICAgICAgICAgICAgICAgICAgICBpZDogcmVzcG9uc2UuZGF0YS5pZCwKICAgICAgICAgICAgICAgICAgICBuYW1lOiByZXNwb25zZS5kYXRhLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgcGxhbjogcmVzcG9uc2UuZGF0YS5wbGFuLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgbWF4X2xlYWRzOiByZXNwb25zZS5kYXRhLnBsYW4ubWF4X2xlYWRzLAogICAgICAgICAgICAgICAgICAgIG1heF9jbGllbnRzOiByZXNwb25zZS5kYXRhLnBsYW4ubWF4X2NsaWVudHMKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICB0b2FzdCh7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIlBsYW4gd2FzIGNoYW5nZWQhIiwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiaXMtc3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGlzbWlzc2libGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwLAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAiYm90dG9tLXJpZ2h0IgogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1RlYW0nCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRJc0xvYWRpbmcnLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRQdWJLZXk6IGZ1bmN0aW9uIGdldFB1YktleSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMyLiRzdG9yZS5jb21taXQoJ3NldElzTG9hZGluZycsIHRydWUpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoJy9hcGkvdjEvc3RyaXBlL2dldF9zdHJpcGVfcHViX2tleS8nKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfdGhpczIucHViX2tleSA9IHJlc3BvbnNlLmRhdGEucHViX2tleTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX3RoaXMyLiRzdG9yZS5jb21taXQoJ3NldElzTG9hZGluZycsIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["D:\\Projects\\GanarCRM\\ganarcrm_vue\\src\\views\\dashboard\\teams\\Plans.vue"],"names":[],"mappings":";;;AAyCI,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,KAAT,QAAsB,aAAtB;AACA,eAAe;AACX,EAAA,IAAI,EAAE,OADK;AAEX,EAAA,IAFW,kBAEJ;AACH,WAAO;AACH,MAAA,OAAO,EAAE,EADN;AAEH,MAAA,MAAM,EAAE;AAFL,KAAP;AAIH,GAPU;AAQX,EAAA,OARW,qBAQD;AACN,SAAK,SAAL;AACA,SAAK,MAAL,GAAc,MAAM,CAAC,KAAK,OAAN,CAApB;AACH,GAXU;AAYX,EAAA,OAAO,EAAE;AACC,IAAA,SADD,qBACW,IADX,EACiB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAElB,gBAAA,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,cAAnB,EAAmC,IAAnC;;AAEM,gBAAA,IAJY,GAIL;AACT,kBAAA,IAAI,EAAE;AADG,iBAJK;AAAA;AAAA,uBAQZ,KAAI,CACL,IADC,gCACmC,IADnC,EAED,IAFC,CAEI,UAAA,QAAO,EAAK;AACd,kBAAA,OAAO,CAAC,GAAR,CAAY,gBAAZ;;AACA,kBAAA,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,SAAnB,EAA8B;AAC1B,oBAAA,EAAE,EAAE,QAAQ,CAAC,IAAT,CAAc,EADQ;AAE1B,oBAAA,IAAI,EAAE,QAAQ,CAAC,IAAT,CAAc,IAFM;AAG1B,oBAAA,IAAI,EAAE,QAAQ,CAAC,IAAT,CAAc,IAAd,CAAmB,IAHC;AAI1B,oBAAA,SAAS,EAAE,QAAQ,CAAC,IAAT,CAAc,IAAd,CAAmB,SAJJ;AAK1B,oBAAA,WAAW,EAAE,QAAQ,CAAC,IAAT,CAAc,IAAd,CAAmB;AALN,mBAA9B;;AAOA,kBAAA,KAAK,CAAC;AACF,oBAAA,OAAO,EAAE,mBADP;AAEF,oBAAA,IAAI,EAAE,YAFJ;AAGF,oBAAA,WAAW,EAAE,IAHX;AAIF,oBAAA,YAAY,EAAE,IAJZ;AAKF,oBAAA,QAAQ,EAAE,IALR;AAMF,oBAAA,QAAQ,EAAE;AANR,mBAAD,CAAL;;AAQA,kBAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB;AAAE,oBAAA,IAAI,EAAE;AAAR,mBAAlB;AACH,iBApBC,EAoBC,KApBD,CAoBO,UAAA,KAAI,EAAK;AACd,kBAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACH,iBAtBC,CARY;;AAAA;AAgClB,gBAAA,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,cAAnB,EAAmC,KAAnC;;AAhCkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkCrB,KAnCI;AAqCC,IAAA,SArCD,uBAqCa;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACd,gBAAA,MAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,cAAnB,EAAmC,IAAnC;;AADc;AAAA,uBAGR,KAAI,CACL,GADC,CACG,oCADH,EAED,IAFC,CAEI,UAAA,QAAO,EAAK;AACd,kBAAA,MAAI,CAAC,OAAL,GAAe,QAAQ,CAAC,IAAT,CAAc,OAA7B;AACH,iBAJC,EAIC,KAJD,CAIO,UAAA,KAAI,EAAK;AACd,kBAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACH,iBANC,CAHQ;;AAAA;AAUd,gBAAA,MAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,cAAnB,EAAmC,KAAnC;;AAVc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYlB;AAjDK;AAZE,CAAf","sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <div class=\"columns is-multiline\">\r\n            <div class=\"column is-12\">\r\n                <h1 class=\"title\">\r\n                    Plans\r\n                </h1>\r\n            </div>\r\n            <hr>\r\n            <div class=\"column is-4\">\r\n                <div class=\"box\">\r\n                    <h2 class=\"subtitle\">Free</h2>\r\n                    <h4 class=\"is-size-3\">0$</h4>\r\n                    <p>Max 5 clients</p>\r\n                    <p>Max 5 leads</p>\r\n                    <button @click=\"subscribe('free')\" class=\"button is-success\">Downgrade!</button>\r\n                </div>\r\n            </div>\r\n            <div class=\"column is-4\">\r\n                <div class=\"box\">\r\n                    <h2 class=\"subtitle\">Small team</h2>\r\n                    <h4 class=\"is-size-3\">$10</h4>\r\n                    <p>Max 15 clients</p>\r\n                    <p>Max 15 leads</p>\r\n                    <button @click=\"subscribe('smallteam')\" class=\"button is-success\">Subscribe!</button>\r\n                </div>\r\n            </div>\r\n            <div class=\"column is-4\">\r\n                <div class=\"box\">\r\n                    <h2 class=\"subtitle\">Big Team</h2>\r\n                    <h4 class=\"is-size-3\">$25</h4>\r\n                    <p>Max 50 clients</p>\r\n                    <p>Max 50 leads</p>\r\n                    <button @click=\"subscribe('bigteam')\" class=\"button is-success\">Subscribe!</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import axios from 'axios';\r\n    import { toast } from 'bulma-toast'\r\n    export default {\r\n        name: \"Plans\",\r\n        data() {\r\n            return {\r\n                pub_key: '',\r\n                stripe: null\r\n            }\r\n        },\r\n        mounted() {\r\n            this.getPubKey()\r\n            this.stripe = Stripe(this.pub_key)\r\n        },\r\n        methods: {\r\n            async subscribe(plan) {\r\n\r\n                this.$store.commit('setIsLoading', true)\r\n\r\n                const data = {\r\n                    plan: plan\r\n                }\r\n\r\n                await axios\r\n                    .post(`/api/v1/teams/upgrade_plan/`, data)\r\n                    .then(response => {\r\n                        console.log('Plan Upgraded!')\r\n                        this.$store.commit(\"setTeam\", {\r\n                            id: response.data.id,\r\n                            name: response.data.name,\r\n                            plan: response.data.plan.name,\r\n                            max_leads: response.data.plan.max_leads,\r\n                            max_clients: response.data.plan.max_clients,\r\n                        });\r\n                        toast({\r\n                            message: \"Plan was changed!\",\r\n                            type: \"is-success\",\r\n                            dismissible: true,\r\n                            pauseOnHover: true,\r\n                            duration: 2000,\r\n                            position: \"bottom-right\",\r\n                        });\r\n                        this.$router.push({ name: 'Team' })\r\n                    }).catch(error => {\r\n                        console.log(error)\r\n                    })\r\n\r\n                this.$store.commit('setIsLoading', false)\r\n\r\n            },\r\n\r\n            async getPubKey() {\r\n                this.$store.commit('setIsLoading', true)\r\n\r\n                await axios\r\n                    .get('/api/v1/stripe/get_stripe_pub_key/')\r\n                    .then(response => {\r\n                        this.pub_key = response.data.pub_key\r\n                    }).catch(error => {\r\n                        console.log(error)\r\n                    })\r\n                this.$store.commit('setIsLoading', false)\r\n\r\n            }\r\n        }\r\n    }\r\n</script>"],"sourceRoot":""}]}